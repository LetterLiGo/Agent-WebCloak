This is an example of the LLM-to-Script paradigm we built using Gemini-2.5-Pro. The L2S parts in all experiments use this script to automatically generate Python web scraping code for extracting images from websites. LLM analyzes HTML content and creates customized scraping scripts that can handle dynamic content, avoid bot detection, and extract image URLs efficiently.

1. **Generate:** Takes a HTML file and uses the Gemini LLM to generate a custom Python web scraper.
2. **Extract & Execute:** Parses the generated code, saves it as a standalone script, and runs it to download all target images.
3. **Evaluate:** Compares the downloaded images against a ground truth dataset to calculate and report the scraper's precision and recall.

### User Guide

**1. Setup (One-time)**

- **Set API Key:** Set your Gemini API key as an environment variable.
    
    ```jsx
    
    export GEMINI_API_KEY='YOUR_API_KEY'
    ```
    

**2. Execution**

- Navigate to the `webcloak` directory.
- Run the script, providing the relative path to the target HTML file from the `webcloak/` root.

**Example Command:**

```jsx
python llm2script.py dataset/allrecipes/1/index.html
```

The output results of this example are located in 'webcloak/experiments/LLM-to-Script/allrecipes_1_gemini-2.5-pro-preview-03-25' and 'webcloak/experiments/LLM-to-Script/json', the generated logs are located in 'webcloak/experiments/LLM-to-Script/logs', and the code generated by LLM is located in 'webcloak/experiments/LLM-to-Script/generated_scripts'.